<!DOCTYPE html>
<html>
  <head>
    <script type="module" src="./src/components/search-input"></script>
    <script
      type="module"
      src="./src/components/virtualized-table/virtualized-table.ts"
    ></script>
  </head>
  <body>
    <div
      style="
        padding: 2rem;
        display: flex;
        flex-direction: column;
        gap: 1rem;
        max-width: 800px;
        margin: 0 auto;
      "
    >
      <search-input
        placeholder="Search users..."
        debounce="1000"
      ></search-input>

      <virtualized-table height="400"></virtualized-table>
    </div>

    <script>
      const searchInput = document.querySelector("search-input");
      searchInput.suggestions = [
        { id: "1", label: "CJ Doe", value: "john" },
        { id: "2", label: "Dennis Smith", value: "jane" },
        { id: "3", label: "Bob Johnson", value: "bob" },
      ];

      searchInput.addEventListener("search", (event) => {
        console.log("Search:", event.detail.query);
      });

      searchInput.addEventListener("suggestion-selected", (event) => {
        console.log("Selected suggestion:", event.detail.suggestion);
      });

      fetch(
        "https://newsapi.org/v2/everything?sources=bbc-news&apiKey=33eb5a6baf50414e8d5f17a3ad4b7ab9"
      )
        .then((response) => response.json())
        .then((data) => {
          const table = document.querySelector("virtualized-table");
          const slicedData = data.articles.slice(0, 100);
          table.data = slicedData;

          table.columns = [
            {
              key: "description",
              header: "Title",
              sortable: true,
            },
            {
              key: "publishedAt",
              header: "Date",
              sortable: true,
              width: 150,
              align: "center",
            },
          ];

          table.addEventListener("row-click", (event) => {
            console.log("Row clicked:", event.detail);
          });
        })
        .catch((error) => console.error("Error fetching data:", error));
    </script>
  </body>
</html>
